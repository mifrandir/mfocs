\documentclass{article}
\usepackage{assignment}
\begin{document}
\title{C2.6 Mini Project: Homogeneous Spectra}
\author{Franz Miltz}
\date{\today}
\maketitle

\section{Construction}

One may construct projective space by gluing affine schemes.
This is analogous to constructing classical projective space by covering
using affine charts. Given that projective space and its subschemes
play a central role in algebraic geometry, we would like to construct
it more directly. This is possible using a new construction, the
homogeneous spectrum, which extends the classical approach of restricting
the attention to homogeneous polynomials to a more general class of rings.

We will begin by introducing some prerequisites and then continue by
constructing a topological space and its structure sheaf in
complete analogy to $\Spec$.

\subsection{Graded rings}

A classical projective variety is given by homogeneous polynomial
equations. Here homogeneous means that all summands of the polynomial
have the same degree. In particular, one may observe that given a field $k$,
there exists a decomposition
\begin{align*}
  k[X_1,\ldots,X_n] = \bigoplus_{d=0}^\infty k[X_1,\ldots,X_n]_d
\end{align*}
where each $k[X_1,\ldots,X_n]_d$ consists of homogeneous degree $d$
polynomials. Note the crucial property that, for homogeneous polynomials $f$
and $g$ of degree $d$ and $d'$, we obtain a homogeneous polynomial $fg$ of
degree $d+d'$.

In general we are not always dealing with polynomial rings. In order
to identify the homogeneous elements, we need to assume some
additional structure:

\begin{definition}
  Let $\Gamma$ be a monoid.
  A ring $S$ is $\Gamma$-graded if there exists a decomposition
  $S = \bigoplus_{d\in \Gamma} S_d$
  such that $S_d S_{d'} \subseteq S_{d+d'}$.
  A map of rings $\phi : S\to S'$ is graded if it
  respects the grading, i.e. $\phi(S_d) \subseteq S'_d$.
\end{definition}

We are only going to care about the cases $\Gamma=\mathbb{Z}_{\geq 0}$
and $\Gamma=\mathbb{Z}$. Instead of $\mathbb{Z}_{\geq 0}$-graded
we will simply say graded.

\begin{example}
  Every polynomial ring $R[X_1,\ldots,X_n]$ admits a grading into
  homogeneous polynomials of degree $d$ and the inclusion
  $R[X_1,\ldots,X_n] \hookrightarrow R[X_1,\ldots,X_{n+1}]$
  is a map of graded rings.
\end{example}

\begin{example}
  If we have graded rings $S$ and $S'$ then $S\otimes S'$ has an
  obvious grading with $\deg (f \otimes g) = \deg f + \deg g$.
  We obtain similar gradings for general tensor products
  $S\otimes_R S'$.
\end{example}

In light of the motivating example, we call an element
$f$ of a graded ring $S$ homogeneous, if $f\in S_d$ for some $d$
and we write $\deg f = d$.
Such homogeneous elements are going to play a key role. In particular,
the points of $\Proj S$ are going to correspond to prime ideals of $S$
that are generated by homogeneous elements.

\begin{definition}
  An ideal $I$ of a graded ring $S$ is \emph{homogeneous} if it splits into
  additive subgroups $I=\oplus_{d=0}^\infty I_d$ such that
  $I_d\subseteq S_d$ and $S_d I_{d'} \subseteq I_{d+d'}$.
\end{definition}

In other words, if $f\in I$ with decomposition into homogeneous parts
$f=f_1+\cdots + f_m$ then $f_i\in I$ for all $i$. Thus an ideal is
homogeneous if, and only if, it is generated by homogeneous elements.
\cite{boer1961}

\begin{example}
  We define the \emph{irrelevant ideal} of a graded ring $S$
  to be $S_+ = \oplus_{d=1}^\infty S_d$. It is straightforward to
  see that this is indeed a graded ideal.
\end{example}

\subsection{Topological space}

We have assembled all the ingredients to construct the homogeneous
spectrum of a graded ring. Topologically this will simply be a
subspace of the usual spectrum where we exclude all non-homogeneous
ideals and the irrelevant one.

Fix a graded ring $S$.

\begin{definition}
  The \emph{homogeneous spectrum} $\Proj S$
  is the topological subspace of $\Spec S$ containing all
  homogeneous prime ideals that do not contain $S_+$. I.e.
  \begin{align*}
    \Proj S := \left\lbrace{ \text{$p$ homogeneous}, S_+ \not\subseteq p }\right\rbrace \subseteq \Spec S.
  \end{align*}
\end{definition}

We obtain distinguished homogeneous opens
\begin{align*}
  D_+(f) := D(f) \cap \Proj S
\end{align*}
for $f\in S$ homogeneous.
Unsurprisingly, these do indeed form a basis of the homogeneous spectrum.
To see this, some preliminary calculation is required.

\begin{lemma}
  Let $g_0\in S_0$. Then
  \begin{align}\label{eq:distinguished_zero_union}
    D(g_0) \cap \Proj S = \bigcup_{f\in S_d, d\geq 1} D_+(g_0f).
  \end{align}
  \begin{proof}
    ($\supseteq$) We observe, for all $f\in S_d$ with $d\geq 1$,
    \begin{align*}
      D_+(g_0f) \subseteq D(g_0 f) \subseteq D(g_0).
    \end{align*}

    ($\subseteq$) Assume $p\in\Proj S$ such that $g_0\not\in p$, but whenever
    $f\in S_d$ with $d\geq 1$ we have $g_0f\in p$. We then see that $f\in p$
    for all $f\in S_d$ with $d\geq 1$, i.e. $S_+\subseteq p$. This is a
    contradiction. Thus $g_0\in p$ implies $g_0 f\not\in p$
    for some $f\in S_d$ with $d\geq 1$.
  \end{proof}
\end{lemma}

\begin{proposition}
  The set of distinguished opens
  \begin{align*}
    \left\lbrace{ D_+(f) : \text{$f\in S$ homogeneous}}\right\rbrace
  \end{align*}
  forms a basis of $\Proj S$.
  \begin{proof}
    Let $g=g_0+\cdots+g_m\in S$ with $g_i\in S_i$. Then
    \begin{align*}
      D(g)\cap\Proj S
      &= D\left({\sum_i g_i}\right) \cap \Proj S \\
      &= \bigcup_i D(g_i) \cap\Proj S \\
      &= (D(g_0)\cap\Proj S)\cup \bigcup_{i\geq 1} D_+(g_i).
    \end{align*}
    Using (\ref{eq:distinguished_zero_union}) we may write each element
    of the basis
    \begin{align*}
      \left\lbrace{D(g) \cap \Proj S : g\in S}\right\rbrace
    \end{align*}
    as a union of distinguished opens $D_+(f)$.
  \end{proof}
\end{proposition}

\begin{example}\label{ex:proj0_homeo}
  Consider $p\in\Proj R[x]$ for some $R$.
  Note that $R[x]_+\not\subseteq p$ and
  hence $x\not\in p$. If $ax^n\in p$ for some $a\in R$ and $n>0$
  we must have $a\in p$. Thus the map $\Proj R[x] \to \Spec R$
  sending $p \mapsto p \cap R$ is a bijection with inverse
  $p_0 \mapsto p_0 R[x]$. It is straightfoward to verify that both
  directions are continuous, hence we have a homeomorphism
  \begin{align*}
    \Proj R[x] \simeq \Spec R.
  \end{align*}
\end{example}

\subsection{Structure sheaf}


Consider $f\in R$ and recall the localisation $R_f$. This is the ring
that corresponds to a distinguished open $D(f)$. In particular,
there is an isomorphism of schemes:
\begin{align*}
  \Spec R_f \cong D(f).
\end{align*}

Once again fix a graded ring $S$.
If $A\subseteq S$ is a non-empty multiplicatively closed subset
of homogeneous elements then the localisation $S_A$ has a
natural $\mathbb{Z}$-grading where the homogeneous elements
are of the form $s/a$ for $s\in S$ and $a\in A$ and
$\deg(s/a) = \deg s - \deg a$.

\begin{definition}
  Let $A\subseteq S$ a homogeneous submonoid. Then the \emph{homogeneous
  localisation} is the subring of $S_A$ consisting of homogeneous degree zero
  elements $S_{(A)} := (S_A)_0$.
\end{definition}

In close analogy to the regular spectrum construction, there are two important
values of $A$ that we will encounter. Firstly, if $f\in S$ is homogeneous of
positive degree and $I=(f)$ the homogeneous ideal generated by $f$ then we
write $S_{(f)}:=S_{(I)}$. Secondly, if $p\subseteq S$ is a homogeneous prime
ideal and $A=S\setminus p$ then we write $S_{(p)} := S_{(S)}$.
The most important example for our purposes arises from
$S = R[x_0,\ldots,x_n]$ and $A=(x_i)$. We then have
\begin{align*}
  S_{(x_i)} = \left\lbrace{f / x_i^d : f\in R[x_0,\ldots,x_n]_d}\right\rbrace.
\end{align*}
Hence we may think of $S_{(x_i)}$ as homogeneous
polynomials in $R[x_1/x_i,\ldots,x_n/x_i]$.

It turns out that this notion of localisation is precisely what is
required to work with the homogeneous spectrum. Let us observe some
first evidence of this:

\begin{lemma}\label{thm:homogeneous_localisation}
  Let $f\in S$ be homogeneous of positive degree. Then there is
  a homeomorphism
  \begin{align*}
    \Spec S_{(f)} \simeq D_+(f).
  \end{align*}
  \begin{proof}
    Following \cite[\href{https://stacks.math.columbia.edu/tag/00JO}{Tag 00JO}]{stacks-project}.
    By construction $D_+(f)$ is a topological subspace of
    $D(f)\simeq\Spec S_f$.
    We construct an inverse of the inclusion $p_0\mapsto p_0 S_f$.
    Let $g$ be invertible and homogeneous of positive degree in
    $S_f$. If $p_0\subseteq S_{(f)}$ is a prime, then $p_0 S_f$
    is a homogeneous ideal of $S_f$. Now if $ab\in p_0 S_f$ with
    $a$ and $b$ homogeneous then $a^db^d/g^{\deg a + \deg b}\in p_0$.
    Hence $a^d\in p_0 S_f$ or $b^d\in p_0 S_f$ and thus $p=\sqrt{p_0 S_f}$ is a homogeneous prime ideal of $S_f$ with
    $p \cap S_{(f)} = p_0$. Thus we have the bijection
    \begin{align*}
      D_+(f) \subseteq \Spec S_f &\hookrightarrow \Spec S_{(f)} \\
      p &\mapsto p \cap S_{(f)} \\
      \sqrt{p_0 S_f} &\mapsfrom p_0
    \end{align*}
    To see that the inverse is continuous, consider $h\in S_f$
    with homogeneous components $h = h_0 + \cdots + h_d$. Then
    $D(h)\cap D_+(f)\subseteq D_+(f)$ maps to
    $\bigcup D(h_i^d / g^i)\subseteq \Spec S_0$, which is open.
  \end{proof}
\end{lemma}


Now consider the case $D_+(g)\subseteq D_+(f)$. In particular,
by \ref{thm:homogeneous_localisation}, we have an inclusion
$R_{(f)}\hookrightarrow R_{(g)}$. If $D_+(g)=D_+(f)$ then
$\Spec R_{(g)}$ and $\Spec R_{(f)}$ are homeomorphic so
$R_{(f)}$ and $R_{(g)}$ must be isomorphic.
Thus we may define the following sheaf of rings on the $\Proj S$:

\begin{definition}\label{def:structure_sheaf}
  The \emph{structure sheaf} $\mathcal O_{\Proj S}$ is the unique sheaf
  on $\Proj S$ satisfying
  \begin{align}\label{eq:structure_sheaf}
    \mathcal O_{\Proj S}(D_+(f)) := S_{(f)}
  \end{align}
  with the restrictions being the inclusions arising from
  \begin{align*}
    \Spec S_{(f)} \simeq D_+(f) \hookrightarrow D_+(g) \simeq \Spec S_{(g)}.
  \end{align*}
\end{definition}

It is straightforward to see that (\ref{eq:structure_sheaf})
defines a presheaf on the basis of standard opens of $\Proj S$.
However, it remains to check the sheaf conditions:

\begin{proposition}
  The structure sheaf $\mathcal O_{\Proj S}$ is a sheaf.
  In particular, it satisfies the sheaf conditions.
  \begin{proof}
    Following \cite{ellingsrud2023}.
    Consider a cover $D_+(f) = \bigcup_i D_+(f_i)$. Recall that the
    sheaf conditions of the standard basis are equivalent to the
    exactness of the following sequence:
    \begin{align}\label{eq:sheaf_condition}
      0 \longrightarrow
      S_{(f)} \longrightarrow
      \prod S_{(f_i)} \longrightarrow
      \prod S_{(f_if_j)}
    \end{align}
    Recall the exact sequence of graded rings
    \begin{align*}
      0 \longrightarrow
      S_{f} \longrightarrow
      \prod S_{f_i} \longrightarrow
      \prod S_{f_if_j}
    \end{align*}
    by the properties of the structure sheaf on $\Spec S$. By taking
    zero components, which is obviously an exact operation, we find
    that the sheaf conditions hold on the standard basis. Thus
    \ref{def:structure_sheaf} is well-defined by the values on
    standard opens.
  \end{proof}
\end{proposition}

Now that we have a sheaf on the topological space $\Proj S$,
the next step is to make sure that we have a locally ringed space.
Recall that the stalk of the spectrum of a ring at a prime ideal
is the localisation at that prime ideal. Thus we expect the stalks
of the homogeneous spectrum to be the homogeneous localisations.
This is indeed the case.

\begin{proposition}\label{thm:stalks}
  Suppose $x\in\Proj S$
  corresponds to a homogeneous prime ideal $p\subseteq S$. Then the
  stalk of $\mathcal O_{\Proj S}$ at $x$ is
  \begin{align*}
    \mathcal O_{\Proj S,x} = S_{(p)}.
  \end{align*}
  \begin{proof}
    We calculate the stalks on the standard basis as follows
    \begin{align*}
      \mathcal O_{\Proj S,x}
      = \colim_{f\in S_{d>0},f\not\in p} \mathcal O_{\Proj S}(D(f))
      = \colim_{f\in S_{d>0},f\not\in p} S_{(f)}.
    \end{align*}
    Observe that we have inclusions $S_{(f)}\hookrightarrow S_{(fg)}$
    whenever $f,g\not\in p$. In particular, we have
    $S_{(f)} \hookrightarrow S_{(p)}$ whenever $f\not\in p$.
    This shows $S_{(p)}\subseteq \mathcal O_{\Proj S, x}$.
    Now observe that every $g\in\mathcal O_{\Proj S,x}$
    arises from some $S_{(f)}\subseteq S_{(p)}$ and hence
    the claim follows.
  \end{proof}
\end{proposition}

Let us make sure that $S_{(p)}$ is indeed a local ring. To this end,
we make the following simple observation:
\begin{lemma}
  If $S$ is local then so is $S_0$.
  \begin{proof}
    Let $m\subseteq S$ be the unique maximal ideal. Write
    $m_0 = m \cap S_0$. This is an ideal in $S_0$. We may calculate
    $S_0\setminus m_0 = (S\setminus m)\cap S_0 = S^\times\cap S_0 = S_0^\times$.
  \end{proof}
\end{lemma}
Thus, in particular, the homogeneous localisation at a prime ideal
is local. It remains to show that our locally ringed space is
locally affine:

\begin{proposition}
  $(\Proj S, \mathcal O_{\Proj S})$ is a scheme.
  \begin{proof}
    The standard opens $D_+(f)$ are going to be affines.
    By \ref{thm:homogeneous_localisation} we have a homeomorphism
    \begin{align}\label{eq:affine_homeo}
      D_+(f) \simeq \Spec S_{(f)}.
    \end{align}
    We extend this to schemes. Consider a standard open
    $D(g)\subseteq \Spec S_{(f)}$ and write $g=h/f^d$
    for $h$ homogeneous of degree $d\geq 1$.
    Possibly by replacing $h$ by $hf$ and $d$ by $d+1$ we find
    $D_+(h)\subseteq D_+(f)$.
    Now consider $p \in D_+(h)$ and observe
    $h\not\in p$ if, and only if,
    $g = h/f^{d}\not\in p\cap S_{(f)}$.
    Thus
    \begin{align*}
      \mathcal O_{\Proj S}(D_+(h))
      = S_{(h)}
      = (S_h)_0
      = \left({S_{(f)}}\right)_{h/f^d}
      = \left({S_{(f)}}\right)_g
      = \mathcal O_{\Spec S_{(f)}}(D(g)).
    \end{align*}
    Thus we have an isomorphism of sheaves
    $\restrict{\mathcal O_{\Proj S}}{D_+(f)}\cong \mathcal O_{\Spec S_{(f)}}$ that agrees with the homeomorphism
    (\ref{eq:affine_homeo}). Hence $D_+(f)\cong \Spec S_{(f)}$
    as schemes.
  \end{proof}
\end{proposition}

\begin{example}\label{ex:proj0}
  In \ref{ex:proj0_homeo} we saw that there is a homeomorphism
  $\Proj R[X] \simeq \Spec R$. This extends to an isomorphism
  of schemes because
  \begin{align*}
    \mathcal O_{\Proj S,p} = R[X]_{(p)}
    = (R[X]_p)_0
    = R_{p\cap R}
    = \mathcal O_{\Spec S,p\cap R}
  \end{align*}
  for all $p\in\Proj R[X]$.
\end{example}

\section{Properties}

We have defined our scheme $\Proj S$ corresponding to a
graded ring $S$. Before we use this to construct projective space,
we take some time to study properties of both $\Proj$ as an operation
as well as the schemes that are thus obtained.

\subsection{Functoriality}

Recall that the spectrum construction establishes an equivalence
\begin{align*}
  \Spec : \op{\Ring} \cong \AffSch.
\end{align*}
Naively, one might hope that the map $\Proj$ establishes a similar
equivalence between graded rings and projective schemes. Unfortunately,
this fails spectacularly:

\begin{example}\label{ex:proj_not_injective}
  See \cite[Remark 13.7]{gortz2010}.
  Choose integers $\ell,k\geq 1$ and fix a graded ring $S$.
  Define the graded ring $S'$ by $S'_0 = \mathbb{Z}$ and
  \begin{align*}
    S'_d = \begin{cases}
      0 & d<k\\
      S_{\ell d} & d\geq k
    \end{cases}
  \end{align*}
  Consider the map
  \begin{align*}
    \Proj S &\to \Proj S' \\
    p &\mapsto p\cap S'
  \end{align*}
  As $S_+\not\subseteq p$, this is in fact a bijection. Moreover,
  if $f\in S_{d\geq 1}$ then $f^{k\ell}\in S'_{k\ell d}$. But then
  $D_+(f)=D_+(f^{k\ell})$ and $S_{(f)}=S_{(f^{k\ell})}$ so
  $\Proj S \cong \Proj S'$. Hence $\Proj$ fails to be injective
  on isomorphism classes.
\end{example}

\begin{example}\label{ex:no_induced_map}
  Consider the inclusion $R[X]\hookrightarrow R[X,Y]$. Note that
  the preimage of $(X)\in\Proj R[X,Y]$ is the irrelevant ideal
  $(X)=R[X]_+$. Hence not every map of graded rings induces a
  map on projective schemes.
\end{example}

Fortunately, it is possible to work around the problem in
\ref{ex:no_induced_map}. The key idea is to restrict the
map induced by $\phi : S\to S'$ to an open subscheme
\begin{align*}
  G(\phi)
  = \bigcup_{f \in R_{d\geq 1}} D(\phi(f))
  = \left\lbrace{q \in \Proj S' : S_+ \not\subseteq {\phi}^{-1}(q) }\right\rbrace.
\end{align*}
One may then define $\Proj \phi : G(\phi) \subseteq\Proj S' \to \Proj S$ on
$D_+(\phi(f))$ by $p\mapsto {\phi}^{-1}p$ and
$g/f^d \mapsto \phi(g)/\phi(f)^d$. See \cite[p. 371]{gortz2010} or
\cite[p. 139]{ellingsrud2023} for details.

\subsection{Separatedness}

Let us focus our attention towards projective schemes, i.e. schemes
of the form $\Proj S$ for some graded ring $S$. The first property that
one is generally interested in is separatedness. We know that affine schemes are separated. The same is true for projective schemes. In proving
this we will follow \cite[\href{https://stacks.math.columbia.edu/tag/01KP}{Tag 01KP}]{stacks-project} and \cite[\href{https://stacks.math.columbia.edu/tag/01M3}{Tag 01M3}]{stacks-project}, although in a more linear fashion.

We intend to show that the diagonal map
\begin{align}\label{eq:diagonal_map}
  \Delta : \Proj S \to \Proj S \times \Proj S
\end{align}
is a closed immersion. We begin by establishing an affine open
cover of the product $\Proj S\times \Proj S$:
\begin{lemma}
  The schemes $D_+(f)\times D_+(g)$ for homogeneous $f,g\in S$
  of positive degree form an affine open cover of $\Proj S\times \Proj S$.
  \begin{proof}
    We follow \cite[\href{https://stacks.math.columbia.edu/tag/01JS}{Tag 01JS}]{stacks-project}.
    Consider the projections
    \begin{align*}
      \Proj S \xlongleftarrow{p} \Proj S\times \Proj S \xlongrightarrow{q} \Proj S.
    \end{align*}
    It is clear that the sets ${p}^{-1}(D_+(f))\cap{q}^{-1}(D_+(g))$
    form an open cover of $\Proj S\times \Proj S$. We claim there is an isomorphism of
    schemes
    \begin{align}\label{eq:product_intersection_iso}
      D_+(f)\times D_+(g) \cong {p}^{-1}(D_+(f))\cap{q}^{-1}(D_+(g)).
    \end{align}
    To establish this let $T$ be a scheme and consider maps
    $a:T\to D_+(f)\subseteq \Proj S$ and $b:T\to D_+(g)\subseteq \Proj S$.
    Then there is a unique map $T \to \Proj S\times \Proj S$ that makes the
    following commute:
    \begin{equation}
      % https://q.uiver.app/#q=WzAsNixbMCwyLCJYIl0sWzQsMiwiWCJdLFsyLDIsIlhcXHRpbWVzIFgiXSxbMCwxLCJEXysoZikiXSxbNCwxLCJEXysoZykiXSxbMiwwLCJUIl0sWzIsMCwicCJdLFsyLDEsInEiLDJdLFszLDAsIiIsMix7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Imhvb2siLCJzaWRlIjoiYm90dG9tIn19fV0sWzQsMSwiIiwxLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoiaG9vayIsInNpZGUiOiJib3R0b20ifX19XSxbNSwzLCJhIiwyXSxbNSwyLCIiLDIseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XSxbNSw0LCJiIl1d
      \begin{tikzcd}
  && T \\
        {D_+(f)} &&&& {D_+(g)} \\
        \Proj S && {\Proj S\times \Proj S} && \Proj S
        \arrow["p", from=3-3, to=3-1]
        \arrow["q"', from=3-3, to=3-5]
        \arrow[hook', from=2-1, to=3-1]
        \arrow[hook', from=2-5, to=3-5]
        \arrow["a"', from=1-3, to=2-1]
        \arrow[dashed, from=1-3, to=3-3]
        \arrow["b", from=1-3, to=2-5]
      \end{tikzcd}
    \end{equation}
    The image of this map must lie in ${p}^{-1}(D_+(f))\cap{q}^{-1}(D_+(g))$. Hence ${p}^{-1}(D_+(f))\cap{q}^{-1}(D_+(g))$ is a product of the
    open subschemes $D_+(f)$ and $D_+(g)$ and the isomorphism
    (\ref{eq:product_intersection_iso}) follows by uniqueness of products.
  \end{proof}
\end{lemma}

We are now in a position show that the diagonal map restricts to a
closed immersion for each of the open affines in the cover. This
implies that the map as a whole is a closed immersion, a fact which
is straightforward to check.

\begin{theorem}\label{thm:separated}
  Let $S$ be a graded ring. Then $\Proj S$ is separated.
  \begin{proof}
    Note ${\Delta}^{-1}(D_+(f)\times D_+(g)) = D_+(f)\cap D_+(g) = D_+(fg)$.
    To show that
    \begin{align*}
      \Delta : D_+(fg) \to D_+(f)\times D_+(g)
    \end{align*}
    is a closed immersion we need to show that
    $S_{(f)}\otimes S_{(g)}\to S_{(fg)}$ is surjective. To this end,
    consider $s\in S_{(fg)}$. This is of the form
    $s=h/(f^m g^n)$ for some homogeneous $h\in S$ and
    $\deg h = m\deg f + n\deg g$. Without loss of generality we assume
    $m = m'\deg g$ and $n=n'\deg f$ to write
    \begin{align*}
      s = \frac{h}{f^{(m'+n')\deg g}} \cdot \frac{f^{n'\deg g}}{g^{n'\deg g}}
    \end{align*}
    where the factors are elements of $S_{(f)}$ and $S_{(g)}$,
    respectively. Thus the map (\ref{eq:diagonal_map}) is a closed
    immersion on an affine open cover of $\Proj S\times \Proj S$
    and hence in its own right.
  \end{proof}
\end{theorem}


\subsection{Over graded algebras}

We are going to be particularly interested in the case
$S = k[x_0,\ldots,x_n]$ for fields $k$. Noting that such $S$
have a $k$-algebra structure, it is worth investigating projective
schemes $\Proj S$ where $S$ is an algebra over a ring $R$.

Fix a graded $R$-algebra $S$. We immediately
see that the map $R\to S$ induces a map $\Spec S\to\Spec R$ and
hence restricts to a map $\phi:\Proj S\to\Spec R$. Thus $\Proj S$ is a
scheme over $R$. Every graded ring admits a
$\mathbb{Z}$-algebra structure and hence the results of this
section apply to general $\Proj S$ over $\Spec\mathbb{Z}$.

Recall the following standard result:

\begin{lemma}\label{thm:composition_of_separted_maps}
  Let $f:X\to Y$ and $g:Y\to Z$ be maps of schemes. If $g\circ f$ is
  separated then so is $f$.
  \begin{proof}
    See e.g. {\cite[\href{https://stacks.math.columbia.edu/tag/01KV}{Tag 01KV}]{stacks-project}}.
  \end{proof}
\end{lemma}

In light of the previous section we obtain separatedness
over $R$:

\begin{corollary}
  $\Proj S$ is separated over $R$.
  \begin{proof}
    By \ref{thm:separated}, the unique map
    \begin{align*}
      \Proj S \longrightarrow \Spec R \longrightarrow \Spec\mathbb{Z}
    \end{align*}
    is separated. The claim follows by \ref{thm:composition_of_separted_maps}.
  \end{proof}
\end{corollary}

Next observe that standard opens in $\Spec R$ pull back to
standard opens in $\Proj S$.

\begin{lemma}
  ${\phi}^{-1}(D(f))=D_+(\phi^\sharp(f))$ for all $f\in R$.
  \begin{proof}
    This comes down to observation $\phi(p)\in D(f)$
    if, and only if, $f\not\in\phi(p)$. From there it is
    straightforward to calculate
    \begin{align*}
      {\phi}^{-1}(D(f))
      &= \left\lbrace{p\in\Proj S : \phi(p) \in D(f)}\right\rbrace \\
      &= \left\lbrace{p\in\Proj S : f\not\in\phi(p)}\right\rbrace \\
      &= \left\lbrace{p\in\Proj S : \phi^\sharp(f)\not\in p}\right\rbrace \\
      &= D_+(\phi^\sharp(f)),
    \end{align*}
    as required.
  \end{proof}
\end{lemma}

In particular, the standard affine cover of $\Spec R$ pulls back to
affines in $\Proj S$. Hence:

\begin{corollary}\label{thm:quasi_compact}
  $\Proj S$ is quasi-compact over $R$.
\end{corollary}

Now observe that $S=k[x_0,\ldots,x_n]$ is finitely generated over
$k$. This lets us deduce that $\Proj S$ is of finite type over $k$.
This comes down to the following:

\begin{lemma}\label{thm:finite_type}
  If $S$ is finitely generated as a $R$-algebra then
  $\Proj S\to\Spec R$ is of finite type.
  \begin{proof}
    By \ref{thm:quasi_compact}, it suffices to show that $\Proj S$
    is locally of finite type. In particular, we have the open affine
    cover by $D_+(f)$ and $\mathcal O(D_+(f)) = S_{(f)}$.

    Note that there is an isomorphism $S_f \cong S[x]/(xf - 1)$.
    Thus $S_f$ is a finitely generated $S$-algebra. One may
    now consider the maps
    \begin{align*}
      R\longrightarrow S
      \longrightarrow S[x]/(xf-1) \cong S_f
      \longrightarrow S_f/S_+ \cong S_{(f)}.
    \end{align*}
    to see that $S_{(f)}$ is indeed a finitely generated $R$-algebra.
    This shows that $\Proj S$ is locally of finite type and hence
    of finite type.
  \end{proof}
\end{lemma}


\subsection{Noetherianitude}

Finally, let us study when $\Proj S$ is Noetherian. It is not
difficult to see that $S$ being Noetherian will certainly do
the trick:

\begin{proposition}
  If $S$ is Noetherian, then $\Proj S$ is Noetherian.
  \begin{proof}
    Consider the affine opens $D_+(f)\cong\Spec S_{(f)}$.
    As $S$ is Noetherian, so is $S_f$. Now
    $S_{(f)} = S_f / S_+$ and hence $S_{(f)}$ is Noetherian.
    This proves that $\Proj S$ is locally Noetherian and
    by \ref{thm:quasi_compact} the claim follows.
  \end{proof}
\end{proposition}

However, in contrast to $\Spec R$, the converse is not true.

\begin{example}
  Consider the graded ring $S$ with $S_0 = \mathbb{Z}$
  and $S_d = \mathbb{C}[X]_d$. Note that $S_+$ is uncountable and
  hence not finitely generated, thus $S$ is not Noetherian.
  However, by \ref{ex:proj_not_injective} we have
  $\Proj S = \Proj \mathbb{C}[X]$ and hence
  \begin{align*}
    \Proj S \cong \Proj \mathbb{C}[X] \cong \Spec \mathbb{C}
  \end{align*}
  which is certainly Noetherian.
\end{example}

\section{Projective space}

Our main motivation for constructing the homogeneous spectrum and
its structure sheaf was to be able to construct projective space
more directly. In this section we are going to define projective space
as the homogeneous spectrum of a polynomial ring and verify that
this definition agrees with the gluing of affine schemes.

Moreover, we are going to use our new construction to study the
classical case over an algebraically closed field and show that this
does indeed yield a complete variety, as one would expect.

\subsection{Construction}

\begin{definition}
  Let $n\geq 0$. Then $n$-dimensional \emph{projective space}
  is the scheme
  \begin{align*}
    \projective{n}{} = \Proj \mathbb{Z}[X_0,\ldots,X_n].
  \end{align*}
\end{definition}

We have already encountered projective space as a gluing of $n+1$
copies of $n$-dimensional affine space along the maps
\begin{align*}
  \phi^\sharp_{ij} :
  \mathbb{Z}[\ldots,\hat X_i,\ldots,X_j^\pm,\ldots]
  &\to \mathbb{Z}[\ldots,X_i^\pm,\ldots,\hat X_j,\ldots] \\
  X_j &\mapsto {X^{-1}_i}
\end{align*}
We ought to verify that both notions agree.

\begin{lemma}\label{lem:affine_cover}
  There is a covering of $\projective{n}{}$ with opens
  $U_0,\ldots,U_n$ with isomorphisms
  \begin{align*}
    \phi_i : U_i \to \Spec\mathbb{Z}[(X_i^j)_{j=0,\ldots,n}^{i\neq j}],
  \end{align*}
  and
  \begin{align}\label{eq:transition}
    \phi_{ij} : U_i \cap U_j \to \Spec\mathbb{Z}[(X_i^k)_{k=0,\ldots,n}^{k\neq i,j}, (X_i^j)^\pm]
  \end{align}
  such that
  \begin{align*}
    \phi^\sharp_{ji}\circ{\left(\phi^\sharp_{ij}\right)}^{-1} (X_i^k) = X_j^k{(X^i_j)}^{-1}
  \end{align*}
  where we identify $X_i^i = 1$.
  \begin{proof}
    We choose $U_i = D_+(X_i)$. We recall
    \begin{align*}
      U_i = \Spec\mathbb{Z}[X_0,\ldots,X_n]_{(X_i)}.
    \end{align*}
    Now define $\phi_i$ by the ring isomorphism
    $X_j/X_i \mapsto X_i^j$. We need to verify the intersections.
    We have
    \begin{align*}
      U_i \cap U_j
      = D_+(X_i)\cap D_+(X_j)
      = D_+(X_i X_j).
    \end{align*}
    Hence we have a ring isomorphism
    \begin{align*}
      \phi_{ij}^\sharp : \mathbb{Z}[X_0,\ldots,X_n]_{(X_iX_j)}
      &\to \mathbb{Z}[(X_i^k)_{k=0,\ldots,n}^{k\neq i,j}, (X_i^j)^\pm]
    \end{align*}
    given by
    $X_k/X_i \mapsto X_i^k$. It is now straightforward to calculate
    \begin{align*}
      \phi^\sharp_{ji}\circ{\left(\phi^\sharp_{ij}\right)}^{-1}(X^k_i)
      = \phi_{ij}^\sharp (X_k/X_i)
      = \phi_{ij}^\sharp \left({\frac{X_k}{X_j}\cdot\frac{X_j}{X_i}}\right)
      = X^k_j {(X_j^i)}^{-1}.
    \end{align*}
    This defines (\ref{eq:transition}).
  \end{proof}
\end{lemma}

\subsection{Over general rings}

More generally, we may define projective space over any ring and
indeed any field. This is achieved as usual through base change.

\begin{definition}
  Then $n$-dimensional \emph{projective space over $T$} is the
  base change
  \begin{align*}
    \projective{n}{T} := (\projective{n}{})_T = \projective{n}{}\times T.
  \end{align*}
  Here the product on the right is the fibre product over
  $\Spec\mathbb{Z}$. We simplify notation by writing
  $\projective{n}{R}:=\projective{n}{\Spec R}$ for any ring $R$.
\end{definition}

One may think that a more intuitive definition of
$\projective{n}{S}$ would be $\Proj S[X_0,\ldots,X_n]$. Indeed,
some authors adopt this. Let us make sure that both definitions
are equivalent:

\begin{lemma}
  Let $S$ be a graded ring. Every map of rings $S_0\to R$
  induces a canonical isomorphism
  \begin{align*}
    \Proj S\times_{S_0} \Spec R \cong \Proj S\otimes_{S_0} R.
  \end{align*}
  \begin{proof}
    Following \cite[Proposition 9.22]{ellingsrud2023}. Observe
    the identity $x/f^d\otimes g = (x\otimes g)/(f\otimes 1)^d$
    in $S_f\otimes_{S_0} R$. This gives us a canonical isomorphism
    \begin{align}\label{eq:base_change_ring_iso}
      S_f\otimes_{S_0} R \cong (S\otimes_{S_0} R)_{f\otimes 1}.
    \end{align}
    that commutes with the localisations:
    \begin{equation*}
      % https://q.uiver.app/#q=WzAsMyxbMCwxLCJTX2ZcXG90aW1lc197U18wfSBSIl0sWzIsMSwiKFNcXG90aW1lc197U18wfSBSKV97Zlxcb3RpbWVzIDF9Il0sWzEsMCwiU1xcb3RpbWVzX3tTXzB9IFIiXSxbMiwwXSxbMiwxXSxbMCwxLCJcXGNvbmciXV0=
      \begin{tikzcd}
  & {S\otimes_{S_0} R} \\
        {S_f\otimes_{S_0} R} && {(S\otimes_{S_0} R)_{f\otimes 1}}
        \arrow[from=1-2, to=2-1]
        \arrow[from=1-2, to=2-3]
        \arrow["\cong", from=2-1, to=2-3]
      \end{tikzcd}
    \end{equation*}
    Further, this isomorphism restricts to homogeneous elements of
    degree zero. Thus we have an isomorphism of rings
    \begin{align*}
      (S_f\otimes_{S_0} R)_0 \cong ((S\otimes_{S_0} R)_{f\otimes 1})_0
    \end{align*}
    which yields an isomorphism of schemes
    \begin{align}\label{eq:base_change_scheme_iso}
      D_+(f) \times_{S_0} \Spec R \cong D_+(f\otimes 1).
    \end{align}
    Here the left-hand side forms an open cover of
    $\Proj S\times_{S_0}\Spec B$. Now
    $(S\otimes_{S_0} R)_+ = S_+\otimes_{S_0} R$ is generated
    by $f\otimes 1$ for $f\in S_+$. This tells us that the
    $D_+(f\otimes 1)$ form an affine open cover of
    $\Proj S\otimes_{S_0} R$. We now note that the
    diagram
    \begin{equation*}
      % https://q.uiver.app/#q=WzAsNSxbMCwxLCJTX2ZcXG90aW1lc197U18wfSBSIl0sWzIsMSwiKFNcXG90aW1lc197U18wfSBSKV97Zlxcb3RpbWVzIDF9Il0sWzEsMCwiU1xcb3RpbWVzX3tTXzB9IFIiXSxbMCwyLCJTX3tmZid9XFxvdGltZXNfe1NfMH0gUiJdLFsyLDIsIihTXFxvdGltZXNfe1NfMH0gUilfeyhmZidcXG90aW1lcyAxKX0iXSxbMiwwXSxbMiwxXSxbMCwxLCJcXGNvbmciXSxbMyw0LCJcXGNvbmciXSxbMSw0XSxbMCwzXV0=
      \begin{tikzcd}
  & {S\otimes_{S_0} R} \\
        {S_f\otimes_{S_0} R} && {(S\otimes_{S_0} R)_{f\otimes 1}} \\
        {S_{ff'}\otimes_{S_0} R} && {(S\otimes_{S_0} R)_{(ff'\otimes 1)}}
        \arrow[from=1-2, to=2-1]
        \arrow[from=1-2, to=2-3]
        \arrow["\cong", from=2-1, to=2-3]
        \arrow["\cong", from=3-1, to=3-3]
        \arrow[from=2-3, to=3-3]
        \arrow[from=2-1, to=3-1]
      \end{tikzcd}
    \end{equation*}
    commutes. Thus (\ref{eq:base_change_scheme_iso}) must agree
    on intersections $D_+(f)\cap D_+(f')\cong D_+(ff')$ and hence
    yields the required global isomorphism.
  \end{proof}
\end{lemma}

\begin{corollary}
  $\projective{n}{R} \cong \Proj R[X_0,\ldots,X_n]$.
  \begin{proof}
    $\projective{n}{R} = \Proj\mathbb{Z}[X_0,\ldots,X_n]\times\Spec R
    \cong\Proj\mathbb{Z}[X_0,\ldots,X_n]\otimes R
    = \Proj R[X_0,\ldots,X_n]$.
  \end{proof}
\end{corollary}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Homogeneous coordinates}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

We have defined projective space using the homogeneous spectrum
of a ring and reconciled the new definition with the old. However,
from classical algebraic geometry we are used to referring to points
in projective space over a field $k$ by homogeneous coordinates.
It is possible to show that this approach extends to any local ring.
One may show this either by using a series of unpleasant calculations
or quite a bit more theory than is sensible for this purpose.
Thus we only give a sketch of the proof:

\begin{lemma}
  If $R$ is a local ring then there is a bijection
  \begin{align*}
    \projective{n}{R}(R) \cong
    (R^{n+1}\setminus\left\lbrace{0}\right\rbrace)/R^\times.
  \end{align*}
  \begin{proof}[Sketch of proof.]
    Consider homogeneous coordinates $(x_0,\ldots,x_n)$.
    Construct the ideal
    \begin{align}\label{eq:homogeneous_ideal}
      I = (x_i X_j - x_j X_i : 0 \leq i,j\leq n) \subseteq S[X_0,\ldots,X_n].
    \end{align}
    The corresponding $R$-point of $\projective{n}{R}$ is the map
    \begin{align*}
      \Spec R \cong
      \Proj R[X_i] \cong
      \Proj R[X_0,\ldots,X_n]/I
      \longrightarrow \Proj R[X_0,\ldots,X_n]
      = \projective{n}{R}
    \end{align*}
    where we have chosen $x_i\in R^\times$.
    This arises from the quotient map which induces a closed
    embedding under $\Proj$. \cite{ellingsrud2023}


    In the other direction, consider a map
    $\phi:\Spec R \to \projective{n}{R}$.
    Note that the closed point in $\Spec S$ must map to at least
    one of the affine charts $D_+(X_i)$. So the
    restriction
    \begin{align*}
      \phi : {\phi}^{-1}(D_+(X_i)) \to D_+(X_i)
    \end{align*}
    induces a map of rings
    \begin{align*}
      \phi^\sharp : R[X_1/X_i,\ldots,X_n/X_i] \to R.
    \end{align*}
    Write $x_i := \phi^\sharp(X_1/X_i)$. This yields the
    coordinates. One may verify that this agrees with the
    coordinates above, e.g. by using \cite[{Proposition 13.24}]{gortz2010}.
  \end{proof}
\end{lemma}

If we have an inclusion of local rings $R\hookrightarrow S$
then we obtain homogeneous coordinates $(x_0:\cdots:x_n)$
on $\projective{n}{R}(S)$. In particular, for every local ring $R$,
we have homogeneous coordinates on $\projective{n}{}(R)$.

\subsection{Properness}

Projective spaces and their subschemes are particularly important
in algebraic geometry. This is in part because they are proper,
i.e. very well-behaved. Projective coordinates on $\projective{n}{}$
are going to make the proof of properness quite elegant.

\begin{theorem}\label{thm:proper}
  $\projective{n}{S}$ is proper over $S$.
  \begin{proof}
    We follow the quite efficient approach in \cite{davies2017}.
    As base change preserves properness it suffices to show
    that $\projective{n}{}$ is proper. By \ref{thm:separated}
    and \ref{thm:finite_type}, $\projective{n}{}$ is separated and of
    finite type, respectively,
    and are thus justified in applying the valuative criterion
    of properness.

    It remains to show that for all valuation rings
    $V$ with fraction fields $K=\Frac V$ there exists a unique
    map $\Spec V \to \projective{n}{}$ that makes the following commute:
    \begin{equation}
      % https://q.uiver.app/#q=WzAsNCxbMCwwLCJcXHRleHR7U3BlYyB9SyJdLFswLDIsIlxcdGV4dHtTcGVjIH1WIl0sWzIsMCwiXFxtYXRoYmYgUF5uIl0sWzIsMiwiXFx0ZXh0e1NwZWMgfVxcbWF0aGJiIFoiXSxbMCwxXSxbMSwzXSxbMiwzXSxbMCwyXSxbMSwyLCIiLDEseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XV0=
      \begin{tikzcd}
        {\text{Spec }K} && {\mathbf P^n} \\
        \\
        {\text{Spec }V} && {\text{Spec }\mathbb Z}
        \arrow[from=1-1, to=3-1]
        \arrow[from=3-1, to=3-3]
        \arrow[from=1-3, to=3-3]
        \arrow[from=1-1, to=1-3]
        \arrow[dashed, from=3-1, to=1-3]
      \end{tikzcd}
    \end{equation}
    We do this by showing that the inclusion
    $V\hookrightarrow K$ induces a bijection between
    $\projective{n}{}(V)\to\projective{n}{}(K)$.

    Consider
    $[x_0:\cdots:x_n],[x'_0:\cdots:x'_n]\in\projective{n}{}(V)$
    that induce the same point $\projective{n}{}(K)$. Hence
    there is $\lambda\in K^\times$ such that $x_i = \lambda x'_i$
    for all $i$. But now
    \begin{align*}
      V = x_0V + \cdots + x_nV = \lambda x'_0 V + \cdots + \lambda x'_n V = \lambda (x'_0 V + \cdots + x'_n V) = \lambda V,
    \end{align*}
    i.e. $\lambda \in V^\times$. Thus
    $\projective{n}{}(V)\to\projective{n}{}(K)$ is injective.

    In the other direction, consider
    $[x_0:\cdots:x_n]\in \projective{n}{}(K)$. Choose $i$ such
    that $v(x_i)$ is minimal. We may then normalise
    \begin{align*}
      [x_0:\cdots:x_n] = \left[{\frac{x_0}{x_i}: \cdots : \frac{x_n}{x_i}}\right]
    \end{align*}
    and observe $v(x_j/x_i) = v(x_j)-v(x_i) \geq 0$ so
    $x_j/x_i\in V$ which gives us surjectivity.
  \end{proof}
\end{theorem}

We could have taken the more general approach of
\cite[\href{https://stacks.math.columbia.edu/tag/01MF}{Tag 01MF}]{stacks-project} but this is more cumbersome. Of course the elegance
of the presented proof relies on homogeneous coordinates whose
introduction requires work. However, homogeneous coordinates are a
useful tool in and of themselves and hence worth introducing.

\subsection{Integrality}

In this final section we will show that, over a field $k$,
projective space is a variety which, by the previous section,
is complete. The key property that we are missing is integrality.
We are going to show that $\projective{n}{k}$ is reduced and irreducible.

Fix $k$ and $n$.
It is then rather straightforward to see that $\projective{n}{k}$
is indeed reduced.
\begin{lemma}\label{thm:reduced}
  $\projective{n}{k}$ is reduced.
  \begin{proof}
    Consider $x\in \projective{n}{k}$. By~\ref{thm:stalks} we have
    $\mathcal O_{\projective{n}{k},x} = k[X_0,\ldots,X_n]_{(p_x)}$.
    Now note
    that $S=k[X_0,\ldots,X_n]$ is reduced. Thus the localisation
    $S_{p_x}$ is reduced and so is the subring $S_{(p_x)}$.
  \end{proof}
\end{lemma}

We also have irreducibility, however this is not quite as obvious.

\begin{theorem}\label{thm:irreducible}
  $\projective{n}{k}$ is irreducible.
  \begin{proof}
    We follow the proof of \cite[\href{https://stacks.math.columbia.edu/tag/01OL}{Tag 01OL}]{stacks-project}.
    We have shown that $\projective{n}{k}$ may be covered by $U_1,\ldots,U_n$ with
    $U_i \cong \affine{n}{k}$ and $U_i\cap U_j\neq\emptyset$. Now write
    $\projective{n}{k}=X_1 \cup X_2$ for some closed
    $X_1,X_2\subseteq \projective{n}{k}$.
    Fix $i$. As $U_i$ is irreducible we must have
    $U_i\subseteq X_1$ or $U_i\subseteq X_2$. Assume without loss
    of generality $U_i\subseteq X_1$. Now, for all $j$,
    we observe
    \begin{align*}
      U_j = \overline{U_i\cap U_j}\cup U_j\cap(\projective{n}{k}\setminus U_i)
    \end{align*}
    where both sides are closed and the set on the right is a proper
    subset because $U_i\cap U_j$ is non-empty. As $U_j$ is irreducible,
    $U_i\cap U_j$ is dense in $U_j$. Moreover, $U_i \cap U_j$ is
    contained in the closed subset $X_1$. Thus $U_j\subseteq X_1$
    for all $j$ and hence $\projective{n}{k}=X_1$.
  \end{proof}
\end{theorem}

\begin{corollary}
  $\projective{n}{k}$ is a complete variety over $k$.
  \begin{proof}
    From \ref{thm:proper} we have properness which, by definition,
    means separated, universally closed, and of finite type. By
    \ref{thm:reduced} and \ref{thm:irreducible} $\projective{n}{k}$
    is reduced and irreducible which is equivalent to integral.
  \end{proof}
\end{corollary}

\printbibliography

\end{document}
